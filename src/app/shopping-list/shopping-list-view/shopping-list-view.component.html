<div *ngIf="isLoading">
  <app-custom-loading></app-custom-loading>
</div>

<div *ngIf="!isLoading">
  <div class="flex flex-align-center">
    <ic-icon
      [routerLink]="['', 'app', 'menu']"
      mat-ripple
      class="font-size-16rem ml-1rem mt-1rem"
      icon="arrowBackUp"
    ></ic-icon>
  </div>
  <div class="wrapper-flex-center font-size-17rem">Shopping Lists</div>
  <div class="wrapper-flex-center mtb-1rem">
    <div
      (click)="onAddNewList()"
      mat-ripple
      class="btn border-radius-20 violet flex flex-align-center"
    >
      <ic-icon class="font-size-18rem mr-05rem" icon="bxListPlus"></ic-icon>
      Create new
    </div>
  </div>
  <div class="mb-2rem" *ngIf="shoppingLists.length > 0">
    <div
      *ngFor="let list of shoppingLists; let i = index"
      class="wrapper-flex-center"
    >
      <!-- (click)="onListClick(i)" -->
      <div mat-ripple class="box mt-1rem">
        <div class="flex">
          <div class="width-80 p-05rem">
            <div class="flex">
              <div
                (click)="deleteClick(i); $event.stopPropagation()"
                mat-ripple
                [matRippleCentered]="true"
                [matRippleRadius]="12"
                class="btn bttn-icon bttn-icon--red p-1rem ml-05rem mt-05rem"
              >
                <ic-icon class="icon" icon="trashOutline"></ic-icon>
              </div>
              <div class="box__title mt-05rem wrapper-flex-center width-80">
                <div
                  class="wrapper-flex-center text-center"
                  *ngIf="!(editMode == i)"
                >
                  {{ list.name }}
                  <ic-icon
                    (click)="runEditMode(i); $event.stopPropagation()"
                    class="ml-05rem"
                    icon="editIcon"
                  ></ic-icon>
                </div>
                <div *ngIf="editMode == i" class="wrapper-flex-center">
                  <input
                    [ngClass]="{ 'custom-background-invalid': list.name == '' }"
                    #inputName
                    minlength="1"
                    [(ngModel)]="list.name"
                    (click)="$event.stopPropagation()"
                    class="box__title wrapper-flex-center custom-input custom-background"
                  />
                  <ic-icon
                    (click)="exitEditMode(); $event.stopPropagation()"
                    class="ml-1rem"
                    icon="confirmIcon"
                  ></ic-icon>
                </div>
              </div>
            </div>
            <div class="flex-space-between-m">
              <div
                class="flex flex-align-center custom-flex box__description mt-15rem"
              >
                <div class="flex flex-column">
                  <div class="text-left width-100 ml-1rem">
                    Created By: {{ list.createdBy.name }}
                  </div>
                  <div class="text-left width-100 ml-1rem">
                    Completed: {{ calcCompletedItems(i) }}
                  </div>
                </div>
                <div class="mr-1rem mt-m-05rem mb-m-05rem mr-m-1rem">
                  <button mat-button class="green-back">Complete</button>
                </div>
              </div>
            </div>
          </div>
          <div
            (click)="onListClick(i); $event.stopPropagation()"
            class="width-20 custom-background"
          >
            <div class="wrapper-flex-center width-100 height-100">
              <div
                mat-ripple
                [matRippleCentered]="true"
                [matRippleRadius]="12"
                class="btn bttn-icon"
              >
                <ic-icon class="icon" icon="doubleArrowRight"></ic-icon>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
